<!doctype html>
<html>
<head>
	<title>Polinomios M&aacute;gicos</title>
</head>
<body>
	<table>
		<tr>
			<td>
				<input id="polin" type="text">
			</td>
			<td><input type"button" value="Convertir" onclick="convert()"></td>
			<td><p id="lienzo1"></p></td>
		</tr>
		<tr>
			<td>Orden del grupo:</td>
			<td><p id="lienzo2"></p></td>
			<td><input type"button" value="Calcular" onclick="grupcal()"></td>
		</tr>
	</table>
	<script type="text/javascript">
	var ventana=document.getElementById("polin");
	var lienzo2=document.getElementById("lienzo2");
	var lienzo=document.getElementById("lienzo1");
	var poli=[];
	function parseGood(str){
		if (str=="+" || str==""){
			return 1;
		}
		if (str=="-"){
			return -1;
		}
		return parseInt(str);
	}
	function pol(wor){
		var res=[];
		list = wor.split(" ");
		for (var i=0; i<list.length; i++){
			if (list[i].search("x^")== -1){
				if (list[i].search("x")== -1){
					res[0]=parseInt(list[i]);
				} else {
					var key = list[i].split("x");
					res[parseGood(key[1])]=parseGood(key[0]);
				}
			} else {
				var key = list[i].split("x^");
				res[parseGood(key[1])]=parseGood(key[0]);
			}
		}
		for (var ii=0; ii<res.length; ii++){
			if (res[ii] == undefined){
				res[ii] = 0;
			}
		}
		poli = res;
	}
	function isid(lis){
		if (lis[0]!=1){
			return false;
		}
		for (var ii=1; ii<lis.length; ii++){
			if (lis[ii]!=0){
				return false;
			}
		}
		return true;
	}
	function grupo(po){
		n = po.length - 1;
		if (po[n]!=1){
			return -1;
		}
		pa = [];
		for (var a=0; a<n; a++){
			pa[a] = 0;
		}
		pa[0]=1;
		for (var a=1; a<100; a++){
			coef = pa[n-1];
			for (var b=1; b<n; b++){
				pa[n - b]=pa[n - b - 1];
			}
			pa[0]=0;
			for (var b=0; b<n; b++){
				pa[b]=pa[b]-coef*po[b];
			}
			console.log(pa);
			if (isid(pa)){
				return a;
			}
		}
		return 0;
	}
	function convert(){
		pol(ventana.value);
		lienzo.innerHTML = poli;
		console.log(poli);
	}
	function grupcal(){
		lienzo2.innerHTML = grupo(poli);
	}
	</script>
</body>
